
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-a1ce949a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-d19f5e29.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#bitcoin-card-api-documentation" class="toc-h1 toc-link" data-title="Bitcoin Card API Documentation">Bitcoin Card API Documentation</a>
          </li>
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#quickstart" class="toc-h1 toc-link" data-title="Quickstart">Quickstart</a>
          </li>
          <li>
            <a href="#environment" class="toc-h1 toc-link" data-title="Environment">Environment</a>
          </li>
          <li>
            <a href="#building" class="toc-h1 toc-link" data-title="Building">Building</a>
          </li>
          <li>
            <a href="#deployment" class="toc-h1 toc-link" data-title="Deployment">Deployment</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#header-parameters" class="toc-h2 toc-link" data-title="Header Parameters">Header Parameters</a>
                  </li>
                  <li>
                    <a href="#authenticate-user" class="toc-h2 toc-link" data-title="Authenticate User">Authenticate User</a>
                  </li>
                  <li>
                    <a href="#verify-authorization-code-for-user" class="toc-h2 toc-link" data-title="Verify Authorization Code for User">Verify Authorization Code for User</a>
                  </li>
                  <li>
                    <a href="#logout-user" class="toc-h2 toc-link" data-title="Logout User">Logout User</a>
                  </li>
                  <li>
                    <a href="#reset-password" class="toc-h2 toc-link" data-title="Reset Password">Reset Password</a>
                  </li>
                  <li>
                    <a href="#update-password" class="toc-h2 toc-link" data-title="Update Password">Update Password</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#users" class="toc-h1 toc-link" data-title="Users">Users</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-users" class="toc-h2 toc-link" data-title="Get All Users">Get All Users</a>
                  </li>
                  <li>
                    <a href="#get-a-specific-user" class="toc-h2 toc-link" data-title="Get a Specific User">Get a Specific User</a>
                  </li>
                  <li>
                    <a href="#create-user" class="toc-h2 toc-link" data-title="Create User">Create User</a>
                  </li>
                  <li>
                    <a href="#update-user" class="toc-h2 toc-link" data-title="Update User">Update User</a>
                  </li>
                  <li>
                    <a href="#get-user-39-s-card" class="toc-h2 toc-link" data-title="Get User's Card">Get User's Card</a>
                  </li>
                  <li>
                    <a href="#delete-a-specific-user" class="toc-h2 toc-link" data-title="Delete a Specific User">Delete a Specific User</a>
                  </li>
                  <li>
                    <a href="#get-user-39-s-virtual-card" class="toc-h2 toc-link" data-title="Get User's Virtual Card">Get User's Virtual Card</a>
                  </li>
                  <li>
                    <a href="#get-user-transactions" class="toc-h2 toc-link" data-title="Get User Transactions">Get User Transactions</a>
                  </li>
                  <li>
                    <a href="#upload-user-document" class="toc-h2 toc-link" data-title="Upload User Document">Upload User Document</a>
                  </li>
                  <li>
                    <a href="#retrieve-all-user-document" class="toc-h2 toc-link" data-title="Retrieve All User Document">Retrieve All User Document</a>
                  </li>
                  <li>
                    <a href="#retrieve-user-document" class="toc-h2 toc-link" data-title="Retrieve User Document">Retrieve User Document</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.bitcoin.com'>Bitcoin.com</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <p><img src="images/logo-d19f5e29.png" alt="Bitcoin.com"></p>
<h1 id='bitcoin-card-api-documentation'>Bitcoin Card API Documentation</h1><h1 id='introduction'>Introduction</h1>
<p>This is documentation for Bitcoin Card API, REST based API service, which provides various endpoints to Bitcoin.com front end applications. The API allows authorized applications to get user data, create users, their wallet information, card information and various other card user related data. The data provided by the API comes from PostgreSQL compatible database, run on Amazon Web Service, and from card provider APIs (Ternio API and Prysym API). </p>

<p>We have language bindings in Shell, Ruby, Python, and JavaScript! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<p>This example API documentation page was created with <a href="https://github.com/lord/slate">Slate</a>. Feel free to edit it and use it as a base for your own API&#39;s documentation.</p>
<h1 id='quickstart'>Quickstart</h1>
<p>The main purpose of Card API is to handle requests from applications requesting backend data. The data at the moment is mostly tied to Bitcoin.com card users. The users are created in the system by creating them in AWS Cognito. After that, front end application (Bitcoin.com) will call Card API with valid token and execute following steps:</p>

<ol>
<li>Call API create user endpoint. </li>
<li>Create user endpoint will create user in PostgreSQL database.</li>
<li>API will determine which card provider flow should user follow and follow their flow.</li>
<li>User will be setup with card provider (create user, create wallet, signup for card and other necessary steps), or error message will be returned. </li>
</ol>

<p>Any application invoking Card API to setup new card user would only need to create user by invoking create user endpoint. All other steps would happen automatically within the API. The other endpoints below allow other applications to retrieve data related to created users. </p>
<h1 id='environment'>Environment</h1>
<p>The Card API is currently running on AWS EC2 instance. There is a load balancer connected to domain <b>https://card.api.bitcoin.com</b> which will be production end point. The two other endpoints <b>dev.card.api.bitcoin.com</b> and <b>qa.card.api.bitcoin.com</b> will be used for Dev/Staging environments. </p>
<h1 id='building'>Building</h1>
<p>The application is developed in Java/Kotlin programming language and it is using Maven build automation tool for building and deployments. It is also using Spring Framework (java framework for MVC architecture and REST APIs) as a base for all development. Spring Boot is used to run the application in local environment with command specified below. </p>

<p>To build the application, execute following from command line in root application directory:</p>

<p><b>mvn clean install</b></p>

<p>To run the application in development environment, execute:</p>

<p><b>mvn spring-boot:run</b></p>
<h1 id='deployment'>Deployment</h1>
<p>As part of new Bitcoin.com architecture application will be deployed using Docker image. Image will be uploaded to AWS ECR.  </p>
<h1 id='authentication'>Authentication</h1>
<p>All communication with Card API is done over HTTPS protocol. We provide user with the certificate after which user can connect to the API. </p>

<p>In order for any client to access Card API endpoints, valid access token has to be obtained from AWS Cognito. Token can be obtained for any user created in Cognito by calling API /login page. Once user is authenticated and valid token obtained, all data for that user can be accessed from API, as well as user info updated.   </p>

<p>Token is parsed and validated by the API and and only after this verification can API be accessed. The access is limited to only that authenticated user. </p>

<p>If token is invalid, user has globally logged out, or token was never issued by Cognito, Card API will return <b>401</b> code and <b>&#39;Unauthorized&#39;</b> message.</p>
<h3 id='header-parameters'>Header Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Used to pass token value in the format <b>Bearer (token value)</b></td>
</tr>
</tbody></table>
<h2 id='authenticate-user'>Authenticate User</h2><pre class="highlight shell tab-shell"><code><span class="sb">`</span>curl -v -X POST https://card.api.bitcoin.com/v1/login<span class="sb">`</span>
</code></pre>
<blockquote>
<p>The above command returns Cognito token like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"access_token"</span><span class="p">:</span><span class="s2">"eyJraWQiOiI1T3U5TGJNMEU1aXJwdDZud3F0WTVZUWFJK0JuMXZZWVZCbVJkVE1GUmNFPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJkYzBlYzk1ZC1kZDQ1LTQzYTgtYmE3Zi02MTk5NWM5N2QwZmMiLCJ0b2tlbl91c2UiOiJhY2Nlc3MiLCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIiwiYXV0aF90aW1lIjoxNTgxMzkzOTgwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0yLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMl9MeGdGd0FOQXIiLCJleHAiOjE1ODEzOTc1ODAsImlhdCI6MTU4MTM5Mzk4MCwidmVyc2lvbiI6MiwianRpIjoiMzRmYTA5YmEtNGJiYS00YmEwLWJjMjktYzQ2ZmQ2YTkwZGIzIiwiY2xpZW50X2lkIjoiN29ka2hpOHQ5dmc0cnRlZmNwNmd2aDZiMG0iLCJ1c2VybmFtZSI6InRlc3RfdXNlcjEifQ.rv-SiBXjkIGYEC-5GDZRJ3_A9xxCWxjMqR8wtAm7gyD0HIAf3joqRyzmfOg_wBByu0_V8sp5WMTfcvME3DghhivxDDUmZjLOcog8s06g6NcpWTgta-fozUBa6ilHC9ioedfPEcYcLTcD2leNinjf0dONpZJOzd6wZR2oYPeXkPJlwNqwvY5UkTXAX1kupiXJ53o-7Lfvn_mF6BjazvjUdlbcYwSgXnol41jW2htiYYYUjQWVx4Wr61uc1WQY0Vv5GVeJ8bjr1oo8iLD7bXP6DAmzIhqrikVtWtZ6pcOHBKa3BLR4Iz7-1fd3KDfqyyCTiT3gVrxutBI9FCfT1iwexw"</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Endpoint to login the user. Must be a valid, already created Cognito user. </p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If user is not authorized, HTTP code 401 will be returned.</aside>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://card.api.bitcoin.com/v1/login</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>User name of the user to login</td>
</tr>
<tr>
<td>password</td>
<td>Password of the user to login</td>
</tr>
</tbody></table>
<h2 id='verify-authorization-code-for-user'>Verify Authorization Code for User</h2><pre class="highlight shell tab-shell"><code><span class="sb">`</span>curl -v -X POST https://card.api.bitcoin.com/v1/verify<span class="sb">`</span>
</code></pre>
<p>Endpoint to verify authorization code sent to user&#39;s email. Must be a valid, already created Cognito user.</p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If user is not authorized, HTTP code 401 will be returned.</aside>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://card.api.bitcoin.com/v1/verify</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>User name of the user to login</td>
</tr>
<tr>
<td>code</td>
<td>User code sent to the email</td>
</tr>
</tbody></table>
<h2 id='logout-user'>Logout User</h2><pre class="highlight shell tab-shell"><code><span class="sb">`</span>curl -v -X GET https://card.api.bitcoin.com/v1/logout<span class="sb">`</span>
</code></pre>
<p>Endpoint to globally logout user. Cognito can issue multiple tokens for the same user. This endpoint would invalidate all outstanding user tokens. </p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If user is not authorized, HTTP code 400 will be returned.</aside>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET https://card.api.bitcoin.com/v1/logout</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<p>No parameters are passed, except token in Authorization header in format Bearer <token></p>
<h2 id='reset-password'>Reset Password</h2><pre class="highlight shell tab-shell"><code><span class="sb">`</span>curl -v -X POST https://card.api.bitcoin.com/v1/reset-password<span class="sb">`</span>
</code></pre>
<p>Endpoint to reset user&#39;s password. This endpoint will send email with reset password code which should be used to reset password on next call. This endpoint does not require token as user might have forgotten the password so no authentication is necessary before the reset.  </p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If user is not found, HTTP code 404 will be returned.</aside>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST https://card.api.bitcoin.com/v1/reset-password</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>usernameOrEmail</td>
<td>Parameter accepts either username or email so we can reset the password</td>
</tr>
</tbody></table>
<h2 id='update-password'>Update Password</h2><pre class="highlight shell tab-shell"><code><span class="sb">`</span>curl -v -X POST https://card.api.bitcoin.com/v1/update-password/me<span class="sb">`</span>
</code></pre>
<p>Endpoint to update user&#39;s password by passing code received in email. </p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If user is not found, HTTP code 404 will be returned.</aside>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST https://card.api.bitcoin.com/v1/update-password/me</code></p>
<h3 id='url-parameters-4'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>newPassword</td>
<td>New user&#39;s password</td>
</tr>
<tr>
<td>code</td>
<td>User code sent to the email</td>
</tr>
</tbody></table>
<h1 id='users'>Users</h1><h2 id='get-all-users'>Get All Users</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://card.api.bitcoin.com/v1/users"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>COMING SOON - This endpoint retrieves all users.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET https://card.api.bitcoin.com/v1/users</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>
<h2 id='get-a-specific-user'>Get a Specific User</h2><pre class="highlight shell tab-shell"><code><span class="sb">`</span>curl -v -X GET https://card.api.bitcoin.com/v1/users/me<span class="sb">`</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="s2">"firstName"</span><span class="p">:</span><span class="s2">"Mehmed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lastName"</span><span class="p">:</span><span class="s2">"XXX"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="s2">"2019-12-16T23:03:41.121+0000"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="s2">"2020-01-03T15:56:10.302+0000"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"md@yahoo.com"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"phoneNumber"</span><span class="p">:</span><span class="s2">"(997) 334-2323"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"dateOfBirth"</span><span class="p">:</span><span class="s2">"99/99/9999"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"gender"</span><span class="p">:</span><span class="s2">"M"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"promotioanlConsent"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"addresStreet"</span><span class="p">:</span><span class="s2">"2208 Flat Branch"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"addressCity"</span><span class="p">:</span><span class="s2">"Richmond"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"addressPostalCode"</span><span class="p">:</span><span class="s2">"23233"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"addressState"</span><span class="p">:</span><span class="s2">"Va"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"shippingAddresStreet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2208 Flat Branch Ct."</span><span class="p">,</span><span class="w">
   </span><span class="s2">"shippingAddressCity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Richmond"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"shippingAddressPostalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23233"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"shippingAddressState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Va"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"shippingAddressCountry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"shippingAddresStreet2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apt 2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"shippingAddressCountry"</span><span class="p">:</span><span class="s2">"USA"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"defaultCurrencyId"</span><span class="p">:</span><span class="s2">"BCH"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"socialSecurityNumber"</span><span class="p">:</span><span class="s2">"888-00-8888"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"mduric"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves a specific user.</p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If user is not found, HTTP code 404 will be returned.</aside>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET https://card.api.bitcoin.com/v1/users/me</code></p>
<h3 id='url-parameters-5'>URL Parameters</h3>
<p>No parameters necessary. Username will be extracted from passed token and user details returned. </p>

<p>Both parameters are optional, but one of them has to be passed in order to retrieve valid user. </p>
<h2 id='create-user'>Create User</h2><pre class="highlight shell tab-shell"><code><span class="s1">'curl -v -X POST https://card.api.bitcoin.com/v1/users \
   -H "Content-type:application/json" -d \
   "{\"firstName\":\"Joe\", \
   \"lastName\":\"Doe\", \
   \"email\":\"md@yahoo.com\", \
   \"phoneNumber\":\"941-667-2323\", \
   \"dateOfBirth\":\"04/24/1987\", \
   \"gender\":\"M\", \
   \"isActive\":\"true\", \
   \"promotionalConsent\":\"true\", \
   \"addresStreet\":\"1122 Ridgefield Dr.\", \
   \"addresStreet2\":\"Apt. 22\", \
   \"addressCity\":\"Venice\", \
   \"addressPostalCode\":\"34210\", \
   \"addressState\":\"Ohio\", \
   \"addressCountry\":\"US\", \
   \"defaultCurrencyId\":\"BCH\", \
   \"socialSecurityNumber\":\"223-23-2323\", \
   \"username\":\"mduric\", \
   \"password\":\"test123\" \
   }"'</span>
</code></pre>
<p>This endpoint creates new user in Posgres and Cognito. Postgres requires unique email and and username. Cognito requires unique username.  </p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If error, HTTP code 400 (bad request) will be returned.</aside>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>POST https://card.api.bitcoin.com/v1/users</code></p>
<h3 id='url-parameters-6'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>firstName</td>
<td>The first name of the user</td>
</tr>
<tr>
<td>lastName</td>
<td>The last name of the user</td>
</tr>
<tr>
<td>email</td>
<td>The email of the user</td>
</tr>
<tr>
<td>phoneNumber</td>
<td>The phone number of the user</td>
</tr>
<tr>
<td>dateOfBirth</td>
<td>The date of birth of the user</td>
</tr>
<tr>
<td>gender</td>
<td>The gender of the user</td>
</tr>
<tr>
<td>isActive</td>
<td>Active or not?</td>
</tr>
<tr>
<td>promotionalConsent</td>
<td>User allows promotional material</td>
</tr>
<tr>
<td>addressStreet</td>
<td>The street address of the user</td>
</tr>
<tr>
<td>addressStreet2</td>
<td>Second line for the address</td>
</tr>
<tr>
<td>addressCity</td>
<td>The city of the user</td>
</tr>
<tr>
<td>addressPostalCode</td>
<td>The postal code of the user</td>
</tr>
<tr>
<td>addressState</td>
<td>The state of the user</td>
</tr>
<tr>
<td>addressCountry</td>
<td>The country of the user</td>
</tr>
<tr>
<td>shippingAddressStreet</td>
<td>The street address of the user</td>
</tr>
<tr>
<td>shippingAddressStreet2</td>
<td>Second line for the address</td>
</tr>
<tr>
<td>shippingAddressCity</td>
<td>The city of the user</td>
</tr>
<tr>
<td>shippingAddressPostalCode</td>
<td>The postal code of the user</td>
</tr>
<tr>
<td>shippingAddressState</td>
<td>The state of the user</td>
</tr>
<tr>
<td>shippingAddressCountry</td>
<td>The country of the user</td>
</tr>
<tr>
<td>defaultCurrencyId</td>
<td>The currency type of the user</td>
</tr>
<tr>
<td>socialSecurityNumber</td>
<td>The SSN of the user</td>
</tr>
<tr>
<td>username</td>
<td>The user name of the user</td>
</tr>
<tr>
<td>password</td>
<td>The password for the created user</td>
</tr>
</tbody></table>
<h2 id='update-user'>Update User</h2><pre class="highlight shell tab-shell"><code>curl -v -X PUT https://card.api.bitcoin.com/v1/users <span class="se">\</span>
   -H <span class="s2">"Content-type:application/json"</span> -d <span class="se">\</span>
   <span class="s2">"{ </span><span class="se">\</span><span class="s2">
      </span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">4</span><span class="se">\"</span><span class="s2">, </span><span class="se">\</span><span class="s2">
      </span><span class="se">\"</span><span class="s2">socialSecurityNumber</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">888-00-8888</span><span class="se">\"</span><span class="s2">, </span><span class="se">\</span><span class="s2">
      </span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">zzz@yahoo.com</span><span class="se">\"</span><span class="s2"> </span><span class="se">\</span><span class="s2">
    }"</span>
</code></pre>
<p>This endpoint update a specific user information.</p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If error, HTTP code 400 (bad request) will be returned.</aside>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>PUT https://card.api.bitcoin.com/v1/users</code></p>
<h3 id='url-parameters-7'>URL Parameters</h3>
<p>Any of the available parameters can be sent for updating.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>firstName</td>
<td>The first name of the user</td>
</tr>
<tr>
<td>lastName</td>
<td>The last name of the user</td>
</tr>
<tr>
<td>email</td>
<td>The email of the user</td>
</tr>
<tr>
<td>phoneNumber</td>
<td>The phone number of the user</td>
</tr>
<tr>
<td>dateOfBirth</td>
<td>The date of birth of the user</td>
</tr>
<tr>
<td>gender</td>
<td>The gender of the user</td>
</tr>
<tr>
<td>isActive</td>
<td>Active or not?</td>
</tr>
<tr>
<td>promotionalConsent</td>
<td>User allows promotional material</td>
</tr>
<tr>
<td>addressStreet</td>
<td>The street address of the user</td>
</tr>
<tr>
<td>addressCity</td>
<td>The city of the user</td>
</tr>
<tr>
<td>addressPostalCode</td>
<td>The postal code of the user</td>
</tr>
<tr>
<td>addressState</td>
<td>The state of the user</td>
</tr>
<tr>
<td>addressCountry</td>
<td>The country of the user</td>
</tr>
<tr>
<td>defaultCurrencyId</td>
<td>The currency type of the user</td>
</tr>
<tr>
<td>socialSecurityNumber</td>
<td>The SSN of the user</td>
</tr>
<tr>
<td>userName</td>
<td>The user name of the user</td>
</tr>
</tbody></table>
<h2 id='get-user-39-s-card'>Get User&#39;s Card</h2><pre class="highlight shell tab-shell"><code>curl -v -X GET https://card.api.bitcoin.com/v1/users/card
</code></pre>
<p>This endpoint retrieves user&#39;s card details, including BCH and BTC addresses, KYC approval status, whether card is created with card provider, card provider name. </p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If error, HTTP code 400 (bad request) will be returned.</aside>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>GET https://card.api.bitcoin.com/v1/users/card</code></p>
<h3 id='url-parameters-8'>URL Parameters</h3>
<p>Any of the available parameters can be sent for updating.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cardProvder</td>
<td>The name of the card provider, currently TERNIO or PRYSYM</td>
</tr>
<tr>
<td>cardProviderId</td>
<td>Card provider issued unique ID for the user</td>
</tr>
<tr>
<td>bchAddress</td>
<td>BCH wallet address</td>
</tr>
<tr>
<td>btcAddress</td>
<td>BTC wallet address</td>
</tr>
<tr>
<td>kycApproval</td>
<td>KYC approval status, boolean value &#39;true&#39; or &#39;false&#39;</td>
</tr>
<tr>
<td>cardCreated</td>
<td>Boolean value &#39;true&#39; or &#39;false&#39; stating whether card was successfully created with card provider.</td>
</tr>
</tbody></table>
<h2 id='delete-a-specific-user'>Delete a Specific User</h2><pre class="highlight shell tab-shell"><code>curl -v -X DELETE https://card.api.bitcoin.com/v1/users/me 
</code></pre>
<p>This endpoint deletes a specific user.</p>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>DELETE https://card.api.bitcoin.com/v1/users/me</code></p>
<h3 id='url-parameters-9'>URL Parameters</h3>
<p>No parameters need to be passed, username will be extracted from token. </p>
<h2 id='get-user-39-s-virtual-card'>Get User&#39;s Virtual Card</h2><pre class="highlight shell tab-shell"><code><span class="sb">`</span>curl https://card.api.bitcoin.com/v1/virtual-card<span class="sb">`</span>
</code></pre>
<p>This endpoint retrieves a specific user&#39;s virtual card, such as this: </p>

<p><img src="images/virtual-card.jfif" alt="Virtual Card"></p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If user is not found, HTTP code 404 will be returned.</aside>
<h3 id='http-request-12'>HTTP Request</h3>
<p><code>GET https://card.api.bitcoin.com/v1/virtual-card</code></p>
<h3 id='url-parameters-10'>URL Parameters</h3>
<p>No parameters passed. Image is retrieved using id from user token.</p>
<h2 id='get-user-transactions'>Get User Transactions</h2><pre class="highlight shell tab-shell"><code>curl -v -X GET https://card.api.bitcoin.com/v1/transactions
</code></pre>
<p>This endpoint retrieves user transactions. Currently it is getting data from card provider (Ternio) user ledger transactions, however, this will be expanded to card transactions too. Eventually, this endpoint will get transactions from both card providers and allow several types of transactions to be retrieved. </p>
<h3 id='http-request-13'>HTTP Request</h3>
<p><code>GET https://card.api.bitcoin.com/v1/transactions</code></p>
<h2 id='upload-user-document'>Upload User Document</h2>
<p>Endpoint to upload user documents. Currently we accept documents in 3 formats: PDF, JPG and PNG.</p>
<pre class="highlight shell tab-shell"><code>curl --location --request POST <span class="s1">'https://card.api.bitcoin.com/v1/files'</span> <span class="se">\</span>
--header <span class="s1">'Content-Type: multipart/form-data; boundary=--------------------------548324088818205658029465'</span> <span class="se">\</span>
--form <span class="s1">'file=@/C:/projects/card.jpg'</span> <span class="se">\</span>
--form <span class="s1">'type=PASSPORT'</span>
</code></pre>
<p>This endpoint deletes a specific user.</p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If not allowed, HTTP code 400 will be returned.</aside>
<h3 id='http-request-14'>HTTP Request</h3>
<p><code>POST https://card.api.bitcoin.com/v1/files</code></p>
<h3 id='url-parameters-11'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>file</td>
<td>The file object to upload. Only accepted file types are PDF, JPG and PNG</td>
</tr>
<tr>
<td>type</td>
<td>Type of the file being uploaded</td>
</tr>
</tbody></table>
<h2 id='retrieve-all-user-document'>Retrieve All User Document</h2>
<p>Endpoint to retrieve all user documents. File id retrieved will be used to make additional call to that file object. </p>
<pre class="highlight shell tab-shell"><code>curl --location --request GET <span class="s1">'https://card.api.bitcoin.com/v1/files'</span>
</code></pre>
<p>This endpoint retrieves user file.</p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If not allowed, HTTP code 400 will be returned.</aside>
<h3 id='http-request-15'>HTTP Request</h3>
<p><code>GET https://card.api.bitcoin.com/v1/files</code></p>
<h2 id='retrieve-user-document'>Retrieve User Document</h2>
<p>Endpoint to download user documents, by passing file id retrieved in call which retrieved all user files. </p>
<pre class="highlight shell tab-shell"><code>curl --location --request GET <span class="s1">'https://card.api.bitcoin.com/v1/files/&lt;fileId&gt;'</span>
</code></pre>
<p>This endpoint retrieves user file.</p>

<aside class="success">
If succesfull, HTTP code 200 will be returned
</aside>

<aside class="warning">If not found, HTTP code 404 will be returned.</aside>
<h3 id='http-request-16'>HTTP Request</h3>
<p><code>GET https://card.api.bitcoin.com/v1/files/&lt;fileId&gt;</code></p>
<h3 id='url-parameters-12'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fileId</td>
<td>ID of the file to retrieve</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<aside class="notice">
Card API will respond with following <a href="Errors.xlsx">ERROR MESSAGES</a> if request is made with missing or wrong parameter. The response will also return HTTP Bad Request 400 error code.

</aside>

<p>The Card API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The user requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified user could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access user with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The user requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
